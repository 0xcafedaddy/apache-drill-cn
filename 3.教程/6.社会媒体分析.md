# 社会媒体分析

本教程介绍如何使用 Apache Drill，在原生的 JSON 格式中，分析 Twitter 数据。首先，你使用 Apache 的 Flume 去分割 Twitter 数据中的关键字和语言，然后你使用 Drill 去分析数据。最后，你使用 MicroStrategy 与之进行交互并分析。

## 社会媒体分析条件
  * Twitter 开发者账号
  * AWS 账号
  * 一个 AWS 上的 MapR 节点
  * 一个 MicroStrategy AWS 实例

## 设置 AWS 环境

在 Amazon Web Services（AWS）上配置环境以下任务：
  * 创建一个 Twitter 开发者账号并注册一个 Twitter 应用
  * 提供一个预先设定的 AWS MapR 节点，和 Flume 以及 Drill
  * 提供一个 MicroStrategy AWS 实例
  * 在 MicroStrategy 上配置 Drill，并运行报表和分析
  * 创建一个 Twitter 开发者账号和注册一个应用

该教程是在你熟悉 MicroStrategy 的前提下完成的。更多关于它的使用信息，请看[MicroStrategy 使用指导](http://www.microstrategy.com/Strategy/media/downloads/products/cloud/cloud_aws-user-guide.pdf)

## 建立一个 Twitter 和 Flume 的证书

按以下步骤建立一个 Twitter 并获取 Twitter 证书，需要由 Flume 去建立一个 Twitter 作为数据源：
  1. 去 ``` dev.twitter.com ``` 注册一个你自己的 Twitter 账号。
  2. 点击 ``` Manage Your Apps ``` 在页面底部的工具栏。
  3. 点击 ``` Create New App ``` 并且完善你的表单，然后创建应用。
  4. 在 ``` Keys and Access Tokens ``` 栏中，创建一个 token，然后点击 ``` Create My Access Token ```。你可以创建一个只读权限的 token。
  5. 拷贝以下证书到 Twitter 的 App 中，然后配置 Flume：
    - 消费者的 Key
    - 消费者的秘钥
    - Token
    - Token 秘钥

## 预先在 AWS 上设置一个 MapR 节点

你需要预先在 AWS 上配置一个 MapR 的节点，命名为 ami-4dedc47d。AMI 已经配置了 Flume，Drill，以及特定元素支持的数据流，从 Twitter 和 Drill 的查询视图中。AMI 是一个公开可用社区，它有 6GB 的根目录，以及 100GB 的数据。作为一个小节点，非常大的数据量将大大减少 Twitter 数据查询的响应时间。
  1. 在 AWS 中，启动一个实例。AMI 镜像是预用 m2.2xlarge 实例类型，以及 4 个虚拟 CPU 和 32G 内存。
  2. 选择 AMI 的 id ami-4dedc47d。
  3. 确保你的实例被分配了一个外网 IP，静态 IP 是首选，但不是必需的。
  4. 确保你的节点上的 TCP 和 UDP 端口可用。
  5. 在配置和启动实例后，在 AWS EC2 的管理界面重新启动节点来完成配置。

该节点是需要安装 Flume 和 Drill。下一步，更新 Flume 的配置文件所需要的证书和 keywords。
